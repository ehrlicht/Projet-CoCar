<!DOCTYPE html>
<html lang="en">
<head>
    <script src="js/jquery-3.3.1.js"></script>
    <meta charset="UTF-8">
    <title>Interface chauffeur</title>
    <link href="css/semantic.min.css" rel="stylesheet" type="text/css">
</head>
<body class="ui inverted segment">
<div id="app">
    <div class="ui inverted segments">
        <div class="ui inverted segment titre center aligned"><h1 style="font-size:2.5em;color: yellow;">CarPool</h1></div>
        <div id = "container" class="ui inverted segment center aligned" style="height: 100%"></div>
    </div>
</div>
<script>
    $.get("http://groups.cowaboo.net/2018/group01/public/api/observatory?observatoryId=coCar", function( data ) {
        $( ".result" ).html( data );
        var values = data.dictionary.entries;
        var drivers = new Array();
        for (var key in values) {
            var driver = JSON.parse(values[key].value);
            drivers.push(driver);
            console.log(driver)
        }
        afficherListeDrivers(drivers);
        alert( "Load was performed." );
    });

    function afficherListeDrivers (drivers) {
        var tableStr = "" +
            "<table class=\"ui inverted table\">" +
            "<thead style=\"background-color: #fffc28\">\n" +
            "  <tr>\n" +
            "      <th>Chauffeur</th>\n" +
            "      <th>Email</th>\n" +
            "      <th>Places disponibles</th>\n" +
            "      <th>RÃ©gion</th>\n" +
            "  </tr>\n" +
            "</thead>\n" +
            "<tbody>\n";
        for (var i = 0; i < drivers.length; i++) {
            tableStr +="<tr><td>"+drivers[i].prenom+" "+drivers[i].nom+"</td><td>"+drivers[i].email+"</td><td>"+drivers[i].carCapacity+"</td><td>"+drivers[i].region+"</td></tr>";
        }
        tableStr += " " +
            "</tbody>\n" +
            "</table>";
        $("#container").html(tableStr);

    }
</script>
</body>
</html>